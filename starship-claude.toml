"$schema" = 'https://starship.rs/config-schema.json'

add_newline = false

# Simple format using environment variables from statusline script with fill
format = "${env_var.WORKTREE_PATH_PREFIX}${env_var.WORKTREE_PATH_SHORTENED}${env_var.WORKTREE_PATH_NORMAL}$git_branch${env_var.CLAUDE_MODEL}${env_var.CLAUDE_CONTEXT_GREEN}${env_var.CLAUDE_CONTEXT_YELLOW}${env_var.CLAUDE_CONTEXT_RED}${env_var.CLAUDE_VERSION}${env_var.CLAUDE_LINES_ADDED}${env_var.CLAUDE_LINES_REMOVED}${env_var.CLAUDE_COST}${env_var.CLAUDE_NEW_FIELDS}"

# No right_format needed when using fill

command_timeout = 5000

# Environment variables for worktree paths from world-nav
[env_var.WORKTREE_PATH_PREFIX]
format = "[$env_value]($style)"
style = "purple"
description = "Path prefix from world-nav"

[env_var.WORKTREE_PATH_SHORTENED]
format = "[$env_value]($style)"
style = "cyan"
description = "Shortened path segments from world-nav"

[env_var.WORKTREE_PATH_NORMAL]
format = "[$env_value]($style) "
style = "bold cyan"
description = "Full path segments from world-nav"

# Claude Code environment variables
[env_var.CLAUDE_MODEL]
format = "[⚡ $env_value]($style) "
style = "bold yellow"
description = "Claude model name"

[env_var.CLAUDE_VERSION]
format = "[v$env_value]($style) "
style = "dimmed white"
description = "Claude Code version"

# Claude Code cost tracking (only shows when non-zero)
[env_var.CLAUDE_COST]
format = '[$env_value]($style) '
style = "cyan"
description = "Total cost in dollars"
variable = "CLAUDE_COST"
default = ""

# Lines added (green, padded to 4 digits)
[env_var.CLAUDE_LINES_ADDED]
format = '[+$env_value]($style)'
style = "green"
description = "Lines added"
variable = "CLAUDE_LINES_ADDED_PADDED"
default = ""

# Lines removed (yellow, padded to 4 digits)
[env_var.CLAUDE_LINES_REMOVED]
format = '/[-$env_value]($style) '
style = "yellow"
description = "Lines removed"
variable = "CLAUDE_LINES_REMOVED_PADDED"
default = ""

# Context used - green (<50%)
[env_var.CLAUDE_CONTEXT_GREEN]
format = '[$env_value]($style) '
style = "green"
description = "Context used (low)"
variable = "CLAUDE_CONTEXT_GREEN"
default = ""

# Context used - yellow (50-75%)
[env_var.CLAUDE_CONTEXT_YELLOW]
format = '[$env_value]($style) '
style = "yellow"
description = "Context used (moderate)"
variable = "CLAUDE_CONTEXT_YELLOW"
default = ""

# Context used - red (>75%)
[env_var.CLAUDE_CONTEXT_RED]
format = '[$env_value]($style) '
style = "bold red"
description = "Context used (high)"
variable = "CLAUDE_CONTEXT_RED"
default = ""

# Unknown fields indicator (shows when new fields are detected)
[env_var.CLAUDE_NEW_FIELDS]
format = '[$env_value]($style) '
style = "bold red"
description = "Unknown fields detected in Claude JSON"
variable = "CLAUDE_NEW_FIELDS"
default = ""

# Fill module to push content to the right
#[fill]
#symbol = " "

# Git branch - same as starship-simple.toml
[git_branch]
format = '[$symbol$branch(:$remote_branch)]($style) '

# Character prompt
[character]
success_symbol = "[❯](bold green)"
error_symbol = "[❯](bold red)"

# Command duration
[cmd_duration]
format = "[$duration]($style) "
style = "yellow"
min_time = 2000
show_milliseconds = false

# Jobs indicator
[jobs]
format = "[$symbol$number]($style) "
symbol = "⚙ "
style = "blue"
threshold = 1

# Time display
[time]
disabled = false
format = '[$time]($style) '
style = "dimmed white"
time_format = "%H:%M"

# Disable modules we don't need
[username]
disabled = true

[hostname]
disabled = true

[directory]
disabled = true  # Using world-nav instead

[gcloud]
disabled = true

[container]
disabled = true

[git_status]
disabled = true  # Keep it simple like starship-simple.toml
